Kafka start:
bin/zookeeper-server-start.sh config/zookeeper.properties
bin/kafka-server-start.sh config/server.properties
bin/kafka-topics.sh --create --topic eth --bootstrap-server localhost:9092
bin/kafka-console-consumer.sh --topic eth --from-beginning --bootstrap-server localhost:9092

Dynamo DB local:

java -Djava.library.path=./DynamoDBLocal_lib -jar DynamoDBLocal.jar -sharedDb -dbPath .


aws dynamodb create-table \
    --table-name BlockConfig \
    --attribute-definitions \
        AttributeName=config_type,AttributeType=S \
    --key-schema \
        AttributeName=config_type,KeyType=HASH \
    --provisioned-throughput \
        ReadCapacityUnits=5,WriteCapacityUnits=5 \
    --region us-east-1

aws dynamodb create-table \
    --table-name GasCostPerHour \
    --attribute-definitions \
        AttributeName=DATE,AttributeType=S \
        AttributeName=HOUR,AttributeType=S \
    --key-schema \
        AttributeName=DATE,KeyType=HASH \
        AttributeName=HOUR,KeyType=RANGE \
    --provisioned-throughput \
        ReadCapacityUnits=10,WriteCapacityUnits=5 \
    --endpoint-url http://localhost:8000  # only for local DynamoDB

# To deploy
sam package \
    --template-file template.yaml \
    --output-template-file packaged-template.yaml \
    --s3-bucket market-analysis-cloudformation-assets

# AMI for Debian in Virginia: ami-06db4d78cb1d3bbf9

sam deploy \
    --template-file packaged-template.yaml \
    --stack-name eth_analysis \
    --capabilities CAPABILITY_IAM \
    --parameter-overrides EC2KeyName=KeyName EC2AMI=amiid

sam deploy\
    --template-file packaged-template.yaml  \
    --stack-name eth-analysis    \
    --capabilities CAPABILITY_IAM     \
    --parameter-overrides EC2KeyName=my-key EC2AMI=ami-06db4d78cb1d3bbf9 ETHERSCANAPIKEY=STHSTH
